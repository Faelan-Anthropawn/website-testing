<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Audio Visualizer - Create Stunning Video Visualizations</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#7C8CF8",
                        "background-dark": "#030712",
                        "background-panel": "#111827",
                        "card-dark": "#131B2E",
                        "card-border": "#1F2937",
                        "input-bg": "#1F2937",
                        "text-main": "#F3F4F6",
                        "text-muted": "#9CA3AF",
                        "accent-blue": "#3B82F6",
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                        body: ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                        'xl': '0.75rem',
                        '2xl': '1rem',
                    },
                },
            },
        };
    </script>
<style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #030712; 
        }
        ::-webkit-scrollbar-thumb {
            background: #1F2937; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #374151; 
        }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            font-size: 20px;
        }
        .sidebar-item-active {
            background: rgba(124, 140, 248, 0.1);
            border: 1px solid rgba(124, 140, 248, 0.3);
            color: #F3F4F6;
        }
        canvas {
            width: 100%;
            height: 100%;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        .custom-scrollbar {
            scrollbar-width: thin;
            scrollbar-color: #1F2937 #030712;
        }
        main {
            padding-bottom: 90px;
        }
    </style>
</head>
<body class="bg-background-dark text-text-main min-h-screen flex flex-col font-body transition-colors duration-200 dark overflow-hidden selection:bg-primary selection:text-white">
<header class="border-b border-card-border bg-background-dark/80 backdrop-blur-md sticky top-0 z-50">
<div class="max-w-[1900px] mx-auto px-6 py-4 flex justify-between items-center">
<div>
<h1 class="text-xl font-bold text-white tracking-tight">
                Audio Visualizer <span class="text-primary font-normal">Refined</span>
</h1>
</div>
<div class="flex space-x-3">
<button class="p-2 rounded-lg bg-card-dark hover:bg-card-border transition-colors border border-card-border">
<span class="material-symbols-outlined text-gray-400">help</span>
</button>
<button class="p-2 rounded-lg bg-card-dark hover:bg-card-border transition-colors border border-card-border">
<span class="material-symbols-outlined text-gray-400">settings</span>
</button>
</div>
</div>
</header>
<main class="flex-grow p-4 lg:p-6 w-full max-w-[1900px] mx-auto flex flex-col mt-2 h-[calc(100vh-80px)]">
<section class="grid grid-cols-1 lg:grid-cols-12 gap-6 h-full">
<!-- LEFT SIDEBAR: Elements List -->
<div class="lg:col-span-2 xl:col-span-2 bg-card-dark border border-card-border rounded-xl p-4 shadow-xl flex flex-col h-full overflow-hidden relative group">
<button id="addElementBtn" class="w-full py-3 mb-4 bg-primary/90 hover:bg-primary text-white rounded-lg flex items-center justify-center font-medium shadow-lg shadow-primary/20 transition-all transform hover:-translate-y-0.5 text-sm">
<span class="material-symbols-outlined mr-2">add</span>
                Add Element
            </button>
<div class="flex-grow overflow-y-auto space-y-2 pr-1 custom-scrollbar">
<h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 px-1 mt-2">Added Elements</h3>
<div id="elementsList" class="space-y-2">
<div class="text-gray-500 text-xs text-center py-8">No elements yet</div>
</div>
</div>
<div class="pt-4 border-t border-card-border mt-2">
<div class="flex justify-between items-center text-xs text-gray-500">
<span id="elementCount">0 Elements</span>
<span class="hover:text-white cursor-pointer transition-colors">Clear All</span>
</div>
</div>
</div>

<!-- CENTER: CANVAS + PREVIEW CONTROLS -->
<div class="lg:col-span-7 xl:col-span-7 bg-card-dark border border-card-border rounded-xl p-6 shadow-xl flex flex-col h-full relative overflow-hidden">
<div class="relative z-10 flex-grow flex flex-col h-full">
<div class="flex justify-between items-center mb-4">
<h2 class="text-lg font-semibold flex items-center text-white">
<span class="material-symbols-outlined mr-2 text-primary">preview</span> Preview
                    </h2>
<div class="flex space-x-2">
<div class="bg-background-dark border border-card-border rounded px-2 py-1 text-xs text-gray-400 font-mono">1920 x 1080</div>
</div>
</div>
<div class="flex-grow bg-black rounded-lg flex items-center justify-center relative overflow-hidden group shadow-2xl border border-card-border">
<canvas id="canvas" width="1920" height="1080" style="aspect-ratio: 16/9;"></canvas>
</div>
<div class="relative z-10 bg-background-panel rounded-xl p-4 border border-card-border mt-4 shadow-lg">
<div class="flex items-center justify-between gap-4">
<div class="flex items-center space-x-3">
<button id="playBtn" class="flex items-center justify-center w-10 h-10 text-white hover:text-primary transition-colors bg-card-border rounded-full hover:bg-card-border/80">
<span class="material-symbols-outlined text-2xl fill-current">play_arrow</span>
</button>
<button id="stopBtn" class="flex items-center justify-center w-10 h-10 text-gray-400 hover:text-red-400 transition-colors bg-card-border rounded-full hover:bg-card-border/80">
<span class="material-symbols-outlined text-2xl">stop</span>
</button>
</div>
<div class="flex items-center space-x-3 flex-grow">
<span id="currentTime" class="text-xs text-primary font-mono w-10 text-right">0:00</span>
<div class="relative flex-grow h-1.5 bg-gray-800 rounded-full cursor-pointer group">
<div id="progressBar" class="absolute top-0 left-0 h-full w-[0%] bg-primary rounded-full group-hover:bg-primary/80 transition-colors"></div>
<input id="timeSlider" type="range" min="0" max="100" value="0" class="absolute top-1/2 -translate-y-1/2 w-full h-3 bg-transparent rounded-full cursor-pointer appearance-none z-10" style="margin: 0; padding: 0;">
<div id="progressThumb" class="absolute top-1/2 -translate-y-1/2 left-[0%] w-3 h-3 bg-primary rounded-full shadow-md border border-card-dark group-hover:scale-125 transition-transform pointer-events-none"></div>
</div>
<span id="totalTime" class="text-xs text-gray-500 font-mono w-10">0:00</span>
</div>
<div class="flex items-center gap-2 border-l border-gray-700 pl-4">
<button class="flex items-center text-gray-400 hover:text-white">
<span class="material-symbols-outlined text-xl">volume_up</span>
</button>
</div>
</div>
</div>
</div>
</div>

<!-- Hidden audio and image inputs -->
<input type="file" id="audioFile" accept="audio/*" class="hidden" />
<input type="file" id="imageFile" accept="image/*" class="hidden" />
<input type="text" id="songName" placeholder="Song Name" class="hidden" />
<input type="text" id="artistName" placeholder="Artist Name" class="hidden" />
<select id="fontFamily" class="hidden">
<option value="Inter">Inter</option>
<option value="Fondamento">Fondamento</option>
<option value="Georgia">Georgia</option>
<option value="Arial">Arial</option>
<option value="Courier Prime">Courier Prime</option>
</select>

<!-- RIGHT SIDEBAR: Options Panel -->
<div class="lg:col-span-3 xl:col-span-3 bg-card-dark border border-card-border rounded-xl p-5 shadow-xl flex flex-col h-full overflow-hidden">
<div class="border-b border-card-border pb-4 mb-4 flex justify-between items-center">
<h2 class="font-semibold text-lg text-white">Element Options</h2>
<button class="text-gray-500 hover:text-white">
<span class="material-symbols-outlined text-sm">more_horiz</span>
</button>
</div>
<div class="flex-grow overflow-y-auto space-y-4 pr-1 custom-scrollbar">

<!-- Element Editor Section (Hidden by default) -->
<div id="selectedElementControls" class="hidden space-y-3">
<label class="block">
<span class="text-xs font-semibold text-gray-400 uppercase block mb-2">Element Text</span>
<input type="text" id="elementText" placeholder="Enter text" class="w-full px-3 py-2 bg-input-bg border border-card-border rounded text-gray-300 text-sm placeholder-gray-600 focus:border-primary focus:outline-none" />
</label>
<div class="grid grid-cols-2 gap-2">
<label class="block">
<span class="text-xs font-semibold text-gray-400 uppercase block mb-2">Size</span>
<input type="number" id="elementSize" min="8" max="200" value="48" class="w-full px-3 py-2 bg-input-bg border border-card-border rounded text-gray-300 text-sm focus:border-primary focus:outline-none" />
</label>
<label class="block">
<span class="text-xs font-semibold text-gray-400 uppercase block mb-2">Color</span>
<input type="color" id="elementColor" value="#ffffff" class="w-full px-3 py-2 bg-input-bg border border-card-border rounded text-gray-300 text-sm focus:border-primary focus:outline-none h-10" />
</label>
</div>
<label class="block">
<span class="text-xs font-semibold text-gray-400 uppercase block mb-2">Font</span>
<select id="elementFont" class="w-full px-3 py-2 bg-input-bg border border-card-border rounded text-gray-300 text-sm focus:border-primary focus:outline-none">
<option value="Inter">Inter</option>
<option value="Fondamento">Fondamento</option>
<option value="Georgia">Georgia</option>
<option value="Arial">Arial</option>
<option value="Courier Prime">Courier Prime</option>
</select>
</label>
<div class="space-y-2">
<label class="flex items-center gap-2 text-sm text-gray-300 cursor-pointer">
<input type="checkbox" id="elementBold" class="w-4 h-4 rounded accent-primary" />
Bold
</label>
<label class="flex items-center gap-2 text-sm text-gray-300 cursor-pointer">
<input type="checkbox" id="elementItalic" class="w-4 h-4 rounded accent-primary" />
Italic
</label>
<label class="flex items-center gap-2 text-sm text-gray-300 cursor-pointer">
<input type="checkbox" id="elementDropShadow" class="w-4 h-4 rounded accent-primary" />
Drop Shadow
</label>
</div>
<div class="grid grid-cols-2 gap-2">
<label class="block">
<span class="text-xs font-semibold text-gray-400 uppercase block mb-2">X Offset</span>
<input type="number" id="elementOffsetX" value="0" class="w-full px-3 py-2 bg-input-bg border border-card-border rounded text-gray-300 text-sm focus:border-primary focus:outline-none" />
</label>
<label class="block">
<span class="text-xs font-semibold text-gray-400 uppercase block mb-2">Y Offset</span>
<input type="number" id="elementOffsetY" value="0" class="w-full px-3 py-2 bg-input-bg border border-card-border rounded text-gray-300 text-sm focus:border-primary focus:outline-none" />
</label>
</div>
<div id="glitchEditorSection" class="hidden space-y-3 border-t border-card-border pt-3">
<label class="flex items-center gap-2 text-sm text-gray-300 cursor-pointer">
<input type="checkbox" id="glitchEnabled" class="w-4 h-4 rounded accent-primary" />
Enable Glitch
</label>
<label class="block">
<span class="text-xs font-semibold text-gray-400 uppercase block mb-2">Intensity</span>
<input type="range" id="glitchIntensity" min="0" max="100" value="50" class="w-full accent-primary" />
<span id="glitchIntensityValue" class="text-xs text-gray-500">50%</span>
</label>
<label class="block">
<span class="text-xs font-semibold text-gray-400 uppercase block mb-2">Glitch Type</span>
<select id="glitchType" class="w-full px-3 py-2 bg-input-bg border border-card-border rounded text-gray-300 text-sm focus:border-primary focus:outline-none">
<option value="rgb">RGB Shift</option>
<option value="box">Box Glitch</option>
<option value="line">Line Glitch</option>
</select>
</label>
</div>

<button id="deleteElement" class="w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 rounded-lg transition-colors text-sm">
Delete Element
</button>
</div>

<!-- Add Element Modal (Hidden by default) -->
<div id="addElementModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm">
<div class="bg-card-dark border border-card-border rounded-xl p-8 w-full max-w-2xl mx-4 shadow-2xl">
<div class="flex justify-between items-center mb-6">
<h2 class="text-2xl font-bold text-white">Add Element</h2>
<button id="closeAddModal" class="text-gray-400 hover:text-white text-2xl leading-none">√ó</button>
</div>
<div class="grid grid-cols-3 gap-4">
<button type="button" id="addSongTitle" class="flex flex-col items-center justify-center p-6 rounded-lg bg-background-panel border border-card-border hover:border-primary hover:bg-background-panel/80 transition-all text-center">
<span class="text-4xl mb-2">üéµ</span>
<span class="text-sm font-medium text-gray-300">Song Title & Artist</span>
</button>
<button type="button" id="addText" class="flex flex-col items-center justify-center p-6 rounded-lg bg-background-panel border border-card-border hover:border-primary hover:bg-background-panel/80 transition-all text-center">
<span class="text-4xl mb-2">üìù</span>
<span class="text-sm font-medium text-gray-300">Custom Text</span>
</button>
<button type="button" id="addVisualizer" class="flex flex-col items-center justify-center p-6 rounded-lg bg-background-panel border border-card-border hover:border-primary hover:bg-background-panel/80 transition-all text-center">
<span class="text-4xl mb-2">üéõÔ∏è</span>
<span class="text-sm font-medium text-gray-300">Visualizer Bars</span>
</button>
<button type="button" id="addBackground" class="flex flex-col items-center justify-center p-6 rounded-lg bg-background-panel border border-card-border hover:border-primary hover:bg-background-panel/80 transition-all text-center">
<span class="text-4xl mb-2">üñºÔ∏è</span>
<span class="text-sm font-medium text-gray-300">Background Image</span>
</button>
<button type="button" id="addGlitch" class="flex flex-col items-center justify-center p-6 rounded-lg bg-background-panel border border-card-border hover:border-primary hover:bg-background-panel/80 transition-all text-center">
<span class="text-4xl mb-2">‚ö°</span>
<span class="text-sm font-medium text-gray-300">Glitch Effect</span>
</button>
</div>
</div>
</div>
</div>
</div>
</section>

<!-- Bottom Action Bar - Fixed Position -->
<div class="fixed bottom-0 left-0 right-0 bg-background-dark border-t border-card-border p-4 z-30">
<div class="max-w-[1900px] mx-auto flex justify-between items-center">
<div class="flex items-center space-x-4">
<div class="flex items-center text-gray-400 text-sm">
<span class="material-symbols-outlined text-base mr-2">timer</span>
<span id="durationDisplay">Total Duration: 0:00</span>
</div>
<span class="h-4 w-px bg-card-border"></span>
<div class="flex items-center text-gray-500 text-sm">
<span id="estimatedRender">Est. Render: ~0 mins</span>
</div>
</div>
<div class="flex gap-3">
<button id="uploadAudioBtn" class="flex items-center text-gray-300 hover:text-white font-medium transition-colors text-sm px-3 py-2 rounded-lg hover:bg-white/5 border border-transparent hover:border-card-border">
<span class="material-symbols-outlined mr-2 text-lg">upload_file</span> Upload Audio
</button>
<button class="flex items-center text-gray-300 hover:text-white font-medium transition-colors text-sm px-3 py-2 rounded-lg hover:bg-white/5">
<span class="material-symbols-outlined mr-2 text-lg">download</span> Download Config
</button>
<button id="exportBtn" class="bg-primary hover:bg-primary/90 text-white font-semibold py-2 px-6 rounded-lg shadow-lg shadow-primary/20 transition-all transform hover:-translate-y-0.5 active:translate-y-0 text-sm flex items-center">
<span>Export Video</span>
<span class="material-symbols-outlined ml-2 text-sm">arrow_forward</span>
</button>
</div>
</div>
</div>

<!-- Export Modal -->
<div id="exportModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm">
<div class="bg-card-dark border border-card-border rounded-xl p-8 w-full max-w-sm mx-4 shadow-2xl">
<h2 class="text-2xl font-bold text-white mb-2">Export Video</h2>
<p class="text-sm text-gray-400 mb-6">Exporting at 1440p @ 50 FPS</p>
<div class="bg-background-panel rounded-lg p-4 mb-6 border border-card-border">
<div class="space-y-2 text-sm">
<div class="flex justify-between text-gray-400">
<span>Resolution:</span>
<span class="text-white">1440p</span>
</div>
<div class="flex justify-between text-gray-400">
<span>Frame Rate:</span>
<span class="text-white">50 FPS</span>
</div>
<div class="flex justify-between text-gray-400">
<span>Duration:</span>
<span id="exportDuration" class="text-white">0:00</span>
</div>
</div>
</div>

<div class="flex gap-3 pt-4">
<button id="exportCancel" class="flex-1 py-3 rounded-lg font-semibold text-sm bg-card-border hover:bg-card-border/80 text-white transition-colors">
Cancel
</button>
<button id="beginRender" class="flex-1 py-3 rounded-lg font-semibold text-sm bg-primary hover:bg-primary/90 text-white transition-colors">
Begin Render
</button>
</div>
</div>
</div>
</main>

<script type="module" src="app.js"></script>
</body>
</html>
